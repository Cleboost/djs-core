import { EventListner } from "@djs-core/runtime";
import type { UserConfig } from "../../config.types";
import { ActivityType, Events } from "discord.js";

export default new EventListner<UserConfig>()
	.event(Events.ClientReady)
	.run((client) => {
		client.user?.setActivity({ name: "ðŸ¥– bread", type: ActivityType.Custom });

		// Example: Access user config
		if (client.conf) {
			console.log("User config loaded:");
			console.log(
				`  Database: ${client.conf.database.host}:${client.conf.database.port}`,
			);
			console.log(`  Features - Premium: ${client.conf.features.premium}`);
			console.log(`  Features - Max Users: ${client.conf.features.maxUsers}`);
			console.log(`  API Keys: ${client.conf.apiKeys.length} configured`);
		}
	});
